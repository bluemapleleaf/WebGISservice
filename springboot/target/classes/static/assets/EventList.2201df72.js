import"./index.26f42673.js";import{d as ee,y as m,J as S,K as le,r as p,o as v,k as U,F as x,l,m as t,L as b,w as o,M as Y,f as g,N as j,c as B,x as c,O as C}from"./vendor.4847b99b.js";const ae=c("\u67E5\u8BE2"),ue=c("\u91CD\u7F6E"),te=c("+ \u6DFB\u52A0"),oe=c("\u7F16\u8F91"),ne=c("\u5220\u9664"),de={style:{display:"flex","justify-content":"flex-end"}},ie={style:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column"}},pe=x("div",{style:{"font-size":"20px","margin-bottom":"20px"}},"\u7F16\u8F91\u4E8B\u4EF6",-1),se={style:{"margin-left":"50px"}},re=c("\u672A\u5B8C\u6210"),me=c("\u5DF2\u5B8C\u6210"),fe={style:{"padding-left":"380px"}},ve=c("\u63D0\u4EA4"),ce=c("\u91CD\u7F6E"),be=ee({setup(ye){let T=m([{value:"repair",label:"\u7EF4\u4FEE"},{value:"0",label:"\u4E22\u5931"},{value:"1",label:"\u6361\u5230"}]),L=m([{value:"",label:"\u6240\u6709\u72B6\u6001"},{value:"0",label:"\u672A\u5B8C\u6210"},{value:"1",label:"\u5DF2\u5B8C\u6210"}]),k=S({data:[]}),n=m("repair"),E=m(""),y=m(""),V=m(5),D=m(1),z=m(0);function s(){n.value=="repair"?g.get("/api/repairs",{params:{pageNum:D.value,pageSize:V.value,search:y.value,repairType:"",state:E.value}}).then(d=>{k.data=d.data.data.records,z.value=d.data.data.total}):g.get("/api/lostandfounds",{params:{pageNum:D.value,pageSize:V.value,search:y.value,type:n.value,state:E.value}}).then(d=>{k.data=d.data.data.records,z.value=d.data.data.total,n.value=="0"?a.value.type="0":n.value=="1"&&(a.value.type="1")})}function P(){y.value="",s()}function J(){s()}function K(){s()}let _=m(!1),h=m(""),a=m({id:"",applyId:"",repairId:"",finishId:"",title:"",content:"",place:"",latitude:"",longitude:"",applyDate:"",finishDate:"",repairType:"0",type:"",state:"0"});S([]);function A(){a.value={id:"",applyId:"",repairId:"",finishId:"",title:"",content:"",place:"",latitude:"",longitude:"",applyDate:"",finishDate:"",repairType:"0",type:"",state:"0"},n.value=="0"?a.value.type="0":n.value=="1"&&(a.value.type="1")}function O(){h.value=="post"&&n.value=="repair"&&(a.value.id="",g.post("/api/repairs",a.value).then(d=>{C({message:"repairs\u6DFB\u52A0\u6210\u529F",type:"success"}),s()})),h.value=="post"&&n.value!="repair"&&(a.value.id="",console.log(a.value),g.post("/api/lostandfounds",a.value).then(d=>{C({message:"lostandfounds\u6DFB\u52A0\u6210\u529F",type:"success"}),s()})),h.value=="put"&&n.value=="repair"&&(console.log(a.value),g.put("/api/repairs",a.value).then(d=>{C({message:"repairs\u4FEE\u6539\u6210\u529F",type:"success"}),s()})),h.value=="put"&&n.value!="repair"&&g.put("/api/lostandfounds",a.value).then(d=>{C({message:"lostandfounds\u4FEE\u6539\u6210\u529F",type:"success"}),s()}),_.value=!1,A()}function R(){A(),h.value="post",_.value=!0}function q(d,u){_.value=!0,h.value="put",a.value=u,n.value=="0"?a.value.type="0":n.value=="1"&&(a.value.type="1"),console.log("state: ",a.value.state),console.log("type: ",a.value.type)}function G(d,u){n.value=="repair"&&(console.log(d,u),g.delete("/api/repairs/"+u.id).then(w=>{console.log(w),s()}),C({message:"\u5220\u9664\u6210\u529F",type:"success"}))}return le(()=>{s()}),(d,u)=>{const w=p("el-option"),M=p("el-select"),f=p("el-input"),F=p("el-button"),i=p("el-table-column"),Q=p("el-table"),W=p("el-pagination"),r=p("el-form-item"),I=p("el-row"),H=p("el-date-picker"),N=p("el-radio"),X=p("el-form"),Z=p("el-dialog");return v(),U(Y,null,[x("div",null,[l(M,{modelValue:t(n),"onUpdate:modelValue":u[0]||(u[0]=e=>b(n)?n.value=e:n=e),placeholder:"\u7EF4\u4FEE",size:"small",style:{width:"100px"},onChange:s},{default:o(()=>[(v(!0),U(Y,null,j(t(T),e=>(v(),B(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(M,{modelValue:t(E),"onUpdate:modelValue":u[1]||(u[1]=e=>b(E)?E.value=e:E=e),placeholder:"\u6240\u6709\u72B6\u6001",size:"small",style:{width:"100px","margin-left":"10px"},onChange:s},{default:o(()=>[(v(!0),U(Y,null,j(t(L),e=>(v(),B(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(f,{modelValue:t(y),"onUpdate:modelValue":u[2]||(u[2]=e=>b(y)?y.value=e:y=e),placeholder:"\u8F93\u5165\u5173\u952E\u5B57",style:{width:"300px","margin-bottom":"10px","margin-left":"10px"},size:"small"},null,8,["modelValue"]),l(F,{type:"primary",onClick:s,style:{"margin-left":"10px"},size:"small"},{default:o(()=>[ae]),_:1}),l(F,{type:"primary",plain:"",onClick:P,style:{"margin-left":"10px"},size:"small"},{default:o(()=>[ue]),_:1}),l(F,{type:"success",onClick:R,style:{float:"right"},size:"small"},{default:o(()=>[te]),_:1})]),l(Q,{data:t(k).data,style:{width:"100%",border:"1px solid rgb(228, 228, 228)"}},{default:o(()=>[l(i,{prop:"id",label:"\u7F16\u53F7",width:"50px"}),l(i,{prop:"applyId",label:"\u63D0\u4EA4\u8005ID",width:"65px"}),t(n)=="repair"?(v(),B(i,{key:0,prop:"repairId",label:"\u7EF4\u4FEE\u8005ID",width:"65px"})):(v(),B(i,{key:1,prop:"finishId",label:"\u89E3\u51B3\u8005ID",width:"65px"})),l(i,{prop:"title",label:"\u6807\u9898",width:"50px"}),l(i,{prop:"content",label:"\u5185\u5BB9"}),l(i,{prop:"place",label:"\u5730\u70B9"}),l(i,{prop:"latitude",label:"\u7EAC\u5EA6"}),l(i,{prop:"longitude",label:"\u7ECF\u5EA6"}),l(i,{prop:"applyDate",label:"\u63D0\u4EA4\u65F6\u95F4"}),l(i,{prop:"finishDate",label:"\u89E3\u51B3\u65F6\u95F4"}),l(i,{prop:"state",label:"\u5B8C\u6210\u72B6\u6001",width:"50px"}),l(i,{label:"\u64CD\u4F5C",width:"150"},{default:o(e=>[l(F,{size:"mini",onClick:$=>q(e.$index,e.row)},{default:o(()=>[oe]),_:2},1032,["onClick"]),l(F,{size:"mini",type:"danger",onClick:$=>G(e.$index,e.row)},{default:o(()=>[ne]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),x("div",de,[l(W,{background:"",currentPage:t(D),"onUpdate:currentPage":u[3]||(u[3]=e=>b(D)?D.value=e:D=e),"page-size":t(V),"onUpdate:page-size":u[4]||(u[4]=e=>b(V)?V.value=e:V=e),"page-sizes":[5,10,20,30,40,50,100],onCurrentChange:J,onSizeChange:K,layout:"total, sizes, prev, pager, next, jumper, ->, slot",total:t(z)},null,8,["currentPage","page-size","total"])]),l(Z,{modelValue:t(_),"onUpdate:modelValue":u[18]||(u[18]=e=>b(_)?_.value=e:_=e),width:"700px"},{default:o(()=>[x("div",ie,[pe,l(X,{ref:"Form",modelValue:t(a),"onUpdate:modelValue":u[17]||(u[17]=e=>b(a)?a.value=e:a=e),size:"medium","label-width":"90px","label-position":"right",width:"800px"},{default:o(()=>[l(I,null,{default:o(()=>[l(r,{label:"\u63D0\u4EA4\u8005ID",prop:"applyId"},{default:o(()=>[l(f,{modelValue:t(a).applyId,"onUpdate:modelValue":u[5]||(u[5]=e=>t(a).applyId=e),placeholder:"\u8BF7\u8F93\u5165\u63D0\u4EA4\u8005ID",clearable:"","suffix-icon":"el-icon-user",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(n)=="repair"?(v(),B(r,{key:0,label:"\u7EF4\u4FEE\u8005ID",prop:"repairId"},{default:o(()=>[l(f,{modelValue:t(a).repairId,"onUpdate:modelValue":u[6]||(u[6]=e=>t(a).repairId=e),placeholder:"\u8BF7\u8F93\u5165\u7EF4\u4FEE\u8005ID",clearable:"","suffix-icon":"el-icon-user",style:{width:"100%"}},null,8,["modelValue"])]),_:1})):(v(),B(r,{key:1,label:"\u89E3\u51B3\u8005ID",prop:"finishId"},{default:o(()=>[l(f,{modelValue:t(a).finishId,"onUpdate:modelValue":u[7]||(u[7]=e=>t(a).finishId=e),placeholder:"\u8BF7\u8F93\u5165\u89E3\u51B3\u8005ID",clearable:"","suffix-icon":"el-icon-user",style:{width:"100%"}},null,8,["modelValue"])]),_:1}))]),_:1}),l(I,null,{default:o(()=>[l(r,{label:"\u6807\u9898",prop:"title"},{default:o(()=>[l(f,{modelValue:t(a).title,"onUpdate:modelValue":u[8]||(u[8]=e=>t(a).title=e),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(r,{label:"\u5730\u70B9",prop:"place"},{default:o(()=>[l(f,{modelValue:t(a).place,"onUpdate:modelValue":u[9]||(u[9]=e=>t(a).place=e),placeholder:"\u8BF7\u8F93\u5165\u5730\u70B9",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{label:"\u5185\u5BB9",prop:"content"},{default:o(()=>[l(f,{modelValue:t(a).content,"onUpdate:modelValue":u[10]||(u[10]=e=>t(a).content=e),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",clearable:"",style:{width:"42%"}},null,8,["modelValue"])]),_:1}),l(I,null,{default:o(()=>[l(r,{label:"\u7EAC\u5EA6",prop:"latitude"},{default:o(()=>[l(f,{modelValue:t(a).latitude,"onUpdate:modelValue":u[11]||(u[11]=e=>t(a).latitude=e),placeholder:"\u8BF7\u8F93\u5165\u7EAC\u5EA6",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(r,{label:"\u7ECF\u5EA6",prop:"longitude"},{default:o(()=>[l(f,{modelValue:t(a).longitude,"onUpdate:modelValue":u[12]||(u[12]=e=>t(a).longitude=e),placeholder:"\u8BF7\u8F93\u5165\u7ECF\u5EA6",clearable:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(I,null,{default:o(()=>[l(r,{label:"\u63D0\u4EA4\u65F6\u95F4",prop:"applyDate"},{default:o(()=>[l(H,{modelValue:t(a).applyDate,"onUpdate:modelValue":u[13]||(u[13]=e=>t(a).applyDate=e),type:"datetime",placeholder:"Select date and time",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),l(r,{label:"\u89E3\u51B3\u65F6\u95F4",prop:"finishDate"},{default:o(()=>[l(H,{modelValue:t(a).finishDate,"onUpdate:modelValue":u[14]||(u[14]=e=>t(a).finishDate=e),type:"datetime",placeholder:"Select date and time",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1}),x("div",se,[l(N,{modelValue:t(a).state,"onUpdate:modelValue":u[15]||(u[15]=e=>t(a).state=e),label:"0"},{default:o(()=>[re]),_:1},8,["modelValue"]),l(N,{modelValue:t(a).state,"onUpdate:modelValue":u[16]||(u[16]=e=>t(a).state=e),label:"1"},{default:o(()=>[me]),_:1},8,["modelValue"])]),x("div",fe,[l(r,{size:"large"},{default:o(()=>[l(F,{type:"primary",onClick:O},{default:o(()=>[ve]),_:1}),l(F,{onClick:A},{default:o(()=>[ce]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}});export{be as default};
